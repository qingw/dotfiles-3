#!/bin/bash

pip2_apps=(
cider
pymysql
netaddr
simplejson
pyflakes
pylint
flake8
requests
powerline-status
)

pip3_apps=(
)

dirs=(
~/bin
~/.config
~/Library/Rime
~/.ssh
)

# install xcode commandline tools
gcc
# install xcode and accept license
sudo xcodebuild -license accept

# install homebrew
/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"

for apps in ${pip2_apps[@]}; do
    pip2 install $apps
done

for apps in ${pip3_apps[@]}; do
    pip3 install $apps
done

for dir in ${dirs[@]}; do
    mkdir -p $dir
done

# iTerm shell integration
curl -L https://iterm2.com/shell_integration/install_shell_integration_and_utilities.sh | bash

# setup ssh keys before git

git clone git@github.com:SteamedFish/dotfiles.git
cd ~/dotfiles && git submodule update --init --recursive --remote

python ciderrestore.py

if [[ "$(kextstat | grep "FakeSMC")" != "" ]]; then
    # disable computer sleep
    sudo pmset -a sleep 0
fi

open '/usr/local/Caskroom/lastpass/latest/LastPass Installer/LastPass Installer.app'

# add crontab for NetEase AUTH
echo "* * * * * (/Users/steamedfish/bin/auth 2>&1 >/dev/null)" | crontab
